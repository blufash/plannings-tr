<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Accord DÃ©part</title>
  <script type="module">
    // === Import Firebase depuis le CDN ===
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    // === Configuration de ton projet (copiÃ©e depuis Firebase) ===
    const firebaseConfig = {
      apiKey: "AIzaSyD-lFAelCOh-UUAK7S8MsaxDnzekrsUTcQ",
      authDomain: "accord-depart.firebaseapp.com",
      projectId: "accord-depart",
      storageBucket: "accord-depart.firebasestorage.app",
      messagingSenderId: "972478403471",
      appId: "1:972478403471:web:e8c2792b526557c03df1fa",
      measurementId: "G-EBR6WFVC0Y"
    };

    // === Initialisation ===
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // === Ajouter un accord ===
    async function addAccord() {
      const nom = document.getElementById("nom").value;
      const train = document.getElementById("train").value;

      if (!nom || !train) {
        alert("Remplis tous les champs !");
        return;
      }

      await addDoc(collection(db, "accords"), {
        nom: nom,
        train: train,
        date: new Date().toISOString()
      });

      alert("âœ… Accord ajoutÃ© !");
      document.getElementById("nom").value = "";
      document.getElementById("train").value = "";
      loadAccords();
    }

    // === Charger les accords ===
    async function loadAccords() {
      const querySnapshot = await getDocs(collection(db, "accords"));
      const list = document.getElementById("liste");
      list.innerHTML = "";

      querySnapshot.forEach((doc) => {
        const data = doc.data();
        const item = document.createElement("li");
        item.textContent = `${data.nom} - Train ${data.train} (${new Date(data.date).toLocaleString()})`;
        list.appendChild(item);
      });
    }

    // === Au chargement ===
    window.addAccord = addAccord;
    window.onload = loadAccords;
  </script>
</head>
<body>
  <h1>ðŸš‚ Accord DÃ©part</h1>

  <input id="nom" type="text" placeholder="Ton nom" />
  <input id="train" type="text" placeholder="NumÃ©ro de train" />
  <button onclick="addAccord()">Ajouter</button>

  <h2>ðŸ“‹ Liste des accords</h2>
  <ul id="liste"></ul>
</body>
</html>
